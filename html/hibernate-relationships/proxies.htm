<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<!-- #BeginTemplate "../../master.dwt" -->

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<!-- #BeginEditable "doctitle" -->
<title>Proxies</title>

<meta content="Description of Your Site Goes Here." name="description" />
<meta content="keywords for your site here separate with commas" name="keywords" />
<!-- #EndEditable -->
<link href="../../styles/style2.css" rel="stylesheet" type="text/css" />
<style type="text/css">

.auto-style1 {
	border-width: 0px;
}
.auto-style2 {
	font-family: Cambria, Cochin, Georgia, Times, "Times New Roman", serif;
	font-size: xx-large;
}
.auto-style3 {
	font-family: Cambria, Cochin, Georgia, Times, "Times New Roman", serif;
}
</style>
</head>

<body>

<!-- Begin Container -->
<div id="container">
	<!-- Begin Masthead -->
	<div id="masthead">
		<a href="../../default.html">
		<img alt="My developer connection home" height="88" src="../../images/MDC-logo.gif" width="282" class="auto-style1" /></a>
		<span class="auto-style2"><strong>My Developer Connection</strong><br />
		</span><span class="auto-style3">knowledgebase for software developers</span></div>
	<!-- End Masthead -->
	<!-- Begin Page Content -->
	<div id="page_content" style="left: 0px; top: 0px; height: 569px">
		<!-- Begin Sidebar -->
		<div id="sidebar">
			<ul>
				<li><a href="../../default.html">Home</a></li>
				<li><a href="../../about_mdc.htm">About</a></li>
				<li><a href="../../bestpracticelist.htm">Best Practices</a></li>
				<li><a href="../../articlelist.htm">Articles</a></li>
				<li><a href="../../tutoriallist.htm">Tutorials</a></li>
				<li><a href="../../tipslist.htm">Tips and Samples</a></li>
				<li><a href="#">Architecture</a></li>
				<li><a href="../../faqs.htm">FAQs</a></li>
			</ul>
		</div>
		<!-- End Sidebar -->
		<!-- Begin Content -->
		<div id="content">
			<!-- #BeginEditable "content" -->
		<msnavigation border="0" cellpadding="0" cellspacing="0" width="100%"><msnavigation border="0" cellpadding="0" cellspacing="0" dir="ltr" width="100%"><tr><td valign="top" width="1%">
<p>
</p>

</td><td valign="top" width="24"></td><msnavigation valign="top"><msnavigation border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td>
<p><img border="0" src="../../_borders/mdcletter.JPG" width="48" height="48"></p>

</td></tr></table><msnavigation dir="ltr" border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td valign="top" width="1%">
<p>
</p>

</td><td valign="top" width="24"></td><msnavigation valign="top">

<p><u>3. Proxies</u></p>
<p>An object proxy is just a way to avoid retrieving an object until you need 
it. Hibernate 2 does not proxy objects by default. However, experience has shown 
that using object proxies is preferred, so this is the default in Hibernate 3.</p>
<p>Object proxies can be defined in one of two ways. First, you can add a proxy 
attribute to the class element. You can either specify a different class or use 
the persistent class as the proxy. For example:</p>
<p>&nbsp;&nbsp; &lt;class name=&quot;Location&quot;<br>
&nbsp;&nbsp; proxy=&quot;com.manning.hq.ch03.Location&quot;...&gt;...<br>
&nbsp;&nbsp; &lt;/class&gt;<br>
&nbsp;</p>
<p>The second method is to use the lazy attribute. Setting lazy=&quot;true&quot;is a 
shorthand way of defining the persistent class as the proxy. Let&#39;s assume the 
Location class is defined as lazy:</p>
<p>&nbsp;&nbsp; &lt;class name=&quot;Location&quot;lazy=&quot;true&quot;...&gt;...&lt;/class&gt;<br>
&nbsp;</p>
<p>The lazy attribute is true by default in Hibernate 3. An easy way to disable 
all proxies, including lazy collections, is to set the default-lazy attribute to 
true in the hibernate-mapping element for a given mapping file. Let&#39;s look at an 
example of using a proxied Location instance:</p>
<p>&nbsp;&nbsp; Session session =factory.openSession();<br>
&nbsp;&nbsp; Event ev =(Event)session.load(Event.class,myEventId);<br>
&nbsp;&nbsp; Location loc =ev.getLocation();<br>
&nbsp;&nbsp; String name =loc.getName();<br>
&nbsp;&nbsp; session.close();<br>
&nbsp;</p>
<p>The returned Location instance is a proxy. Hibernate populates the Location 
instance when getName()is called.</p>
<p>You&#39;ll be dealing with a proxy of Location generated by CGLIB until you call 
an instance method. (CGLIB is a code generation library used by Hibernate. You 
can find out more about it at http://cglib.sourceforge.net/.) What happens when 
you retrieve the Event instance from the database? All the properties for the 
Event are retrieved, along with the ID of the associated Location instance. The 
generated SQL looks something like this:</p>
<p>&nbsp;&nbsp;&nbsp; select event0_.id as id0_,event0_.name as 
name0_,event0_.location_id as location_id0_from events event0_where event0_.id=?<br>
&nbsp;</p>
<p>When you call loc.getName(), the following generated SQL is executed:</p>
<p>&nbsp;&nbsp;&nbsp; select location0_.id as id0_as id0_,location0_.name as 
name0_from locations location0_where location0_.id=?<br>
&nbsp;</p>
<p>If you&#39;ve guessed that you can call loc.getId()without invoking a call to the 
database, you&#39;re correct. The proxied object already contains the ID value, so 
it can be safely accessed without retrieving the full object from the database.</p>

		<msnavigation border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td>

				Send mail to <a href="mailto:webmaster@mydeveloperconnection.com">
				webmaster@mydeveloperconnection.com</a> with questions or 
				comments about this web site.<br>
				&nbsp;</td></tr></table><msnavigation border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td>

				Send mail to <a href="mailto:webmaster@mydeveloperconnection.com">
				webmaster@mydeveloperconnection.com</a> with questions or 
				comments about this web site.<br>
				&nbsp;</td></tr></table></td></tr></table><!-- #EndEditable --></div>
		<!-- End Content --></div>
	<!-- End Page Content -->
	<!-- Begin Footer -->
	<div id="footer">
	</div>
	<!-- End Footer --></div>
<!-- End Container -->

</body>

<!-- #EndTemplate -->

</html>
